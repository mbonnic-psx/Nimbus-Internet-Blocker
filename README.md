<div align="center">
<h1>Nimbus DNS Blocker</h1>
</div>

> **Your journey to digital wellness begins with small, mindful steps. Block distractions and cultivate presence.**

A modern .NET MAUI desktop application that helps users take control of their digital habits by blocking distracting websites at the system level.

![gif](https://github.com/mbonnic-psx/Nimbus-Internet-Blocker/blob/master/Nimbus%20SS/Nimbus%20Showcase%20Gif.gif)

---

## ‚òÅÔ∏è Purpose

Nimbus DNS Blocker is a desktop application used to provide users with an easy way to remove distracting websites from the internet. As the internet becomes more ingrained in our life we use it every day and sometimes we need a break. If you are someone dealing with compulsivity problems or sometimes there is just too much going on this app is something that can help you.

### Use Cases
- **Personal Productivity**: Block social media and entertainment sites during work/study hours
- **Parental Controls**: Create safe browsing environments for children
- **Digital Detox**: Take intentional breaks from specific content categories
- **Focus Sessions**: Eliminate distractions during study or deep work
- **Habit Breaking**: Support behavioral change by blocking addictive sites

---

## üåßÔ∏è Features

### Core Functionality
- **Category-Based Blocking**: Pre-configured categories (Adult, AI, Gambling, Gaming, Messenger, News, Shopping, Social, Streaming)
- **System-Level DNS Blocking**: Works across all browsers and applications
- **Custom Site Blocking**: Add your own domains/websites to block
- **Toggle Categories**: Enable/disable entire categories with one click
- **Persistent Configuration**: Settings maintain on application restart
- **Hosts File Management**: Safely modifies Windows hosts file with backup/restore file

### Technical Highlights
- **JSON-Based Storage**: Configuration stored in AppData with seed file pattern
- **Async/Await**: Non-blocking operations throughout
- **Clean Architecture**: Service layer, dependency injection, separation of concerns
- **Input Validation**: URL normalization and domain sanitization
- **Data Persistence**: JSON serialization with error handling
- **Inspirational Quotes**: Motivational messages to support user journey

### Planned Features
- **Password Protection**: Prevent unauthorized configuration changes
- **Usage Statistics**: Track number of domains blocked
- **Wildcard Blocking**: Block entire domains with `*.example.com`
- **Timer**: Time-based blocking for studying/work
- **Resources Page**: A dedicated tab with links and tools for users seeking support with addiction, mental health, or emotional well-being.

---

## ‚õàÔ∏è Screenshots

![dashboard](https://github.com/mbonnic-psx/Nimbus-Internet-Blocker/blob/master/Nimbus%20SS/Nimbus%20Dashboard.png)
> Main Dashboard is where you will see the quote of the day and usage statistics

![blocking](https://github.com/mbonnic-psx/Nimbus-Internet-Blocker/blob/master/Nimbus%20SS/Nimbus%20Blocking.png)
> Blocking page is where you will block domains by based on category or custom website you input

![setting](https://github.com/mbonnic-psx/Nimbus-Internet-Blocker/blob/master/Nimbus%20SS/Nimbus%20Setting.png)
> Setting page is where you will set password and or restore old/default host file 

--- 

## üíß Technology Stack

### Core Technologies
- **Framework**: .NET 7 / .NET MAUI
- **Language**: C# 11
- **UI**: Blazor WebView (Razor components)
- **Storage**: JSON (System.Text.Json)
- **Platform**: Windows Desktop (cross-platform MAUI foundation)

### Key Libraries & APIs
- `Microsoft.Maui.Controls` - Cross-platform UI framework
- `System.Text.Json` - High-performance JSON serialization
- `System.IO` - File system operations
- Windows Hosts File API (`C:\Windows\System32\drivers\etc\hosts`)

---
## üåÇ Security (Planned)

Nimbus is a **local-first** desktop application, it keeps all configurations on the users machine.

### Password Protection 

Nimbus DNS Blocker is adding an optional **Passwork Lock** so that once blocking rules are applied, you must enter a password to:
- Enable categories / add custom sites
- Disable categories / remove custom sites
- Restore the hosts file from a backup
> If an password is not set up you will be prompted to input the quote of the day this is to prevent people that want to change habits but don't have or choose not to have the accountability person that has the password

This is meant to prevent **casual tampering** so people can't just easily switch between different websites to hopefully avoid compulsivity

### Password Hashing (libsodium / Argon2id)

Nimbus will **never store your password**. Instead, it stores a *password hash string* generated by libsodium (Argon2id), which includes its own salt + parameters.

High-level flow:
1. User sets a password ‚Üí app generates a verifier string (e.g., `crypto_pwhash_str`)
2. Verifier string is saved in local app settings (AppData)
3. To unlock, Nimbus verifies the entered password against the stored verifier (e.g., `crypto_pwhash_str_verify`)

### Input Validation & JSON Hardening

Nimbus treats all local configuration as **untrusted input** (even though it lives in AppData).
Planned hardening includes:
- Strict domain normalization (strip protocol/paths, lowercase, dedupe)
- Bounds checks (max file size, max entries per category, max domain length)
- Strongly-typed JSON models (no dynamic type loading / reflection-based polymorphism)
- Safe JSON parsing defaults (no comments, no trailing commas, fail fast on malformed JSON)
- Unit tests for malformed/malicious JSON to prevent crashes ("JSON injection" style payloads)

### Security Limitations

Because Nimbus uses **hosts-file based blocking**, it can't stop a user with **Administrator** access from editing the hosts file directly.
The Admin Lock is designed to prevent *unauthorized changes inside the Nimbus app*, not to provide tamper-proof enforcement against an admin user.

---

## ‚òî Project Structure (Subject to Change)

```
Nimbus-Internet-Blocker/
‚îú‚îÄ‚îÄ Components/
‚îÇ   ‚îî‚îÄ‚îÄ Pages/
‚îÇ       ‚îú‚îÄ‚îÄ Home.razor           # Dashboard with daily quote
‚îÇ       ‚îú‚îÄ‚îÄ Blocking.razor       # Category & custom site management
‚îÇ       ‚îî‚îÄ‚îÄ Settings.razor       # App configuration (coming soon)
‚îú‚îÄ‚îÄ Layout/
‚îÇ   ‚îú‚îÄ‚îÄ MainLayout.razor         # App shell with sidebar navigation
‚îÇ   ‚îî‚îÄ‚îÄ NavMenu.razor            # Sidebar navigation component
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ PresetsRoot.cs           # Category blocklist data models
‚îÇ   ‚îî‚îÄ‚îÄ CustomsRoot.cs           # Custom sites data models
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ PresetService.cs         # Category blocklist management
‚îÇ   ‚îú‚îÄ‚îÄ CustomSitesService.cs    # Custom sites management (WIP)
‚îÇ   ‚îú‚îÄ‚îÄ QuoteService.cs          # Inspirational quote provider
‚îÇ   ‚îî‚îÄ‚îÄ SnackbarService.cs       # Toast notification system
‚îú‚îÄ‚îÄ wwwroot/
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ       ‚îî‚îÄ‚îÄ app.css              # Neumorphic UI styles
‚îú‚îÄ‚îÄ Resources/
‚îÇ   ‚îî‚îÄ‚îÄ Raw/
‚îÇ       ‚îú‚îÄ‚îÄ presets.seed.json    # Default category configuration
‚îÇ       ‚îî‚îÄ‚îÄ custom.seed.json     # Default custom sites config
‚îú‚îÄ‚îÄ MauiProgram.cs               # App initialization & DI setup
‚îî‚îÄ‚îÄ App.xaml.cs                  # Application entry point
```

---

## üå¶Ô∏è Usage

### Blocking Categories

This app will include 9 pre-configured categories:

| Category | Example Sites | Use Case |
|----------|--------------|----------|
| **Adult** | p*rnhub.com, onlyfans.com | Content filtering |
| **AI** | grok.com, claude.ai, chatgpt.com | Limit AI tool usage |
| **Gambling** | draftkings.com, lonestarcasino.com | Prevent gambling access |
| **Gaming** | coolmathgames.com, store.steampowered.com | Focus during work/study |
| **Messanger** | telegram.org, whatsapp.com | Reduce chat distractions |
| **News** | cnn.com, foxnews.com | Avoid news doom-scrolling |
| **Shopping** | amazon.com, ebay.com, temu.com | Control impulse purchases |
| **Social** | facebook.com, twitter.com, reddit.com | Break social media habits |
| **Streaming** | youtube.com, netflix.com, hulu.com | Limit entertainment |

> This is a small list of the domains per each category

### How It Works

1. Open **Nimbus DNS Blocker**
2. Navigate to **Blocking** page
3. Toggle the switch for whichever category
4. Add any custom sites to block
5. Click save at the bottom
6. Blocking will take effect 

Nimbus DNS Blocker modifies the Windows hosts file to redirect blocked domains to `0.0.0.0`:

```
# Normal hosts file
127.0.0.1    localhost

# After Nimbus blocks facebook.com
127.0.0.1    localhost

# --- Nimbus-managed section BEGIN ---
0.0.0.0      facebook.com
0.0.0.0      www.facebook.com
# --- Nimbus-managed section END ---
```

When your browser tries to access `facebook.com`, the hosts file tells your computer to route to `0.0.0.0` (nowhere), blocking the connection and causing an error.

After this the App will automatically flush the DNS Cache by inputting a command on an background cmd process

```cmd
# Open Command Prompt as Administrator
ipconfig /flushdns
```

---

## üå™Ô∏è Architecture Deep Dive

### Service Layer Pattern
**PresetService.cs** - Manages category-based blocklists
```csharp
public class PresetService
{
    // Ensures live JSON file exists in AppData
    public async Task<string> EnsureLiveFileExistsAsync()
    
    // Loads blocklist configuration from AppData
    public async Task<PresetsRoot> LoadAsync()
    
    // Saves modified configuration back to AppData
    public async Task SaveAsync(PresetsRoot root)
    
    // Normalizes/validates all entries (removes dupes, cleans URLs)
    public void NormalizePresets(PresetsRoot root)
}
```

**Key Design Decisions:**
- **Seed File Pattern**: Ships with `presets.seed.json`, copies to `presets.json` in AppData on first run
- **Data Normalization**: Strips protocols, ports, paths from URLs (`https://example.com:443/path` ‚Üí `example.com`)
- **Duplicate Removal**: Case-insensitive deduplication per category

### Data Models
```csharp
// Root configuration object
public class PresetsRoot
{
    public Dictionary<string, PresetCategory> Categories { get; set; }
}

// Individual category (e.g., "Social Media")
public class PresetCategory
{
    public bool Enabled { get; set; }           // Toggle state
    public List<PresetEntry> Entries { get; set; }  // Sites in category
}

// Individual blocked domain
public class PresetEntry
{
    public string Host { get; set; }  // e.g., "facebook.com"
    public string Ipv4 { get; set; }  // Default: "0.0.0.0"
    public string Ipv6 { get; set; }  // Default: "::"
}
```

### JSON Storage Format

**Location**: `%LOCALAPPDATA%\User Name\com.companyname.nimbusinternetblocker\Data\presets.json`

```json
{
  "categories": {
    "Social": {
      "enabled": true,
      "entries": [
        {
          "host": "facebook.com",
          "ipv4": "0.0.0.0",
          "ipv6": "::"
        },
        {
          "host": "www.facebook.com",
          "ipv4": "0.0.0.0",
          "ipv6": "::"
        }
      ]
    }
  }
}
```

---

## üå©Ô∏è Roadmap

### Phase 1: Core Features (Current)
- [x] Category-based blocking
- [x] JSON configuration persistence
- [x] UI
- [x] Inspirational quotes
- [ ] Hosts file integration (in progress)
- [ ] Custom sites management/Integration
- [ ] Apply Settings Button
- [ ] Flush DNS Config

### Phase 2: Advanced Features
- [ ] Password Setup
- [ ] Usage Statistics
- [ ] Wildcard Blocking
- [ ] Timer
- [ ] Resources Page

### Phase 3: Security Features
- [ ] Password Hashing with libsodium/Argon2id
- [ ] Json Hardening
- [ ] Strict Domain Normalization
- [ ] Bounds Checks

---

## üå¶Ô∏è Contact & Support

**Developer**: Matthew Bonnichsen  
**Email**: mbonnic81@gmail.com  
**LinkedIn**: [matthew-bonnichsen](https://www.linkedin.com/in/matthew-bonnichsen)  
**Portfolio**: [github.com/mbonnic-psx](https://github.com/mbonnic-psx)

---

<div align="center">

>"If you feel like you are losing everything remember, trees lose their leaves every year, yet they stand tall and wait for better days to come - Anonymous"

[‚¨Ü Back to Top](#nimbus-dns-blocker)

</div>
